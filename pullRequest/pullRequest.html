<div data-ng-if="$ctrl.isInitialize">
    <div class="waiting" data-ng-hide="$ctrl.hideLoading">
        <spinner></spinner>
    </div>
    <div class="menu-buttons" data-ng-show="$ctrl.hideLoading">
        <div class="list-buttons">
            <div class="list-buttons__button">
                <button data-ng-show="$ctrl.minePullRequests.length > 0" data-ng-class="{ selected: $ctrl.isMinePullRequests() }"
                    data-ng-click="$ctrl.fillMinePullRequests();">Mine ({{$ctrl.minePullRequests.length}})</button>
                <button data-ng-show="$ctrl.toApprovePullRequests.length > 0" data-ng-class="{ selected: $ctrl.isToApprovePullRequests() }"
                    data-ng-click="$ctrl.fillToApprovePullRequests();">To Approve ({{$ctrl.toApprovePullRequests.length}})</button>
                <button data-ng-show="$ctrl.allPullRequests.length > 0" data-ng-class="{ selected: $ctrl.isAllPullRequests()}"
                    data-ng-click="$ctrl.fillPullRequests();">All ({{$ctrl.allPullRequests.length}})</button>
            </div>
            <div class="list-buttons__button">
                <button data-ng-click="$ctrl.toggleSettings();" class="settings-button"></button>
                <member member-selected="$ctrl.memberSelected(member)" members-display="$ctrl.membersDisplay()" current-member="$ctrl.currentMember"></member>
            </div>
        </div>
    </div>
    <div>
        <div class="pullRequest" data-ng-hide="$ctrl.showSettings" data-ng-class="$ctrl.reviewClass(pr)" data-ng-repeat="pr in $ctrl.pullRequests | orderBy:$ctrl.valueOfDate">
            <div class="actions">
                <img data-ng-show="$ctrl.isMinePullRequests()" class="auto-complete" title="Build auto-complete" data-ng-class="{ 'disabled': !pr.autoCompleteSetBy }" data-ng-click="$ctrl.toggleAutoComplete($event, pr);" src="/img/auto-complete.png"/>
            </div>
            <div class="pullRequest-details" data-ng-click="$ctrl.redirect(pr);">
                <img class="memberIcon" data-fallback-src="/member/member-default.png" data-ng-src="{{pr.createdBy.imageUrl}}" title="{{pr.createdBy.displayName}}"/>
                <div class="details">
                    <div>
                        <span class="repository" ng-bind="::pr.repository.name">:</span>
                        <span class="draft" data-ng-class="::{'draft--visible': pr.isDraft}">DRAFT</span>
                    </div>
                    <span data-ng-bind="::pr.title"></span>
                    <div class="branchesInfo">{{::pr.sourceRefName.replace('refs/heads/', '')}} --&gt; {{::pr.targetRefName.replace('refs/heads/', '')}}</div>
                    <div class="reviewer-container">
                        <div
                            data-ng-repeat="reviewer in ::pr.reviewers | filter:$ctrl.isReviewerToDisplay | orderBy: '+reviewer.vote'"
                        >
                            <img class="reviewer__image" data-ng-class="{'reviewer__image--voted': reviewer.vote > 0}" title="{{::reviewer.displayName}}" data-ng-src="{{::$ctrl.getImageWithTodayStr(reviewer.imageUrl)}}" data-fallback-src="/member/member-default.png" />
                        </div>
                    </div>
                    <div class="durationInfo" data-ng-bind="::$ctrl.durationToDisplay(pr)"></div>
                </div>
                <span data-ng-if="::pr.comments.length" class="comments"><span data-ng-bind="::pr.comments.length"></span><div class="comments__image"></div></span>
                <span class="state state-{{pr.evaluations.state}}" title="{{$ctrl.policiesDetails(pr.evaluations.policies)}}"></span>
            </div>
        </div>
    </div>
    <div class="pr-settings" data-ng-show="$ctrl.showSettings">
        <label for="pr-settings-enable-notifications">Activer les notifications</label>
        <input id="pr-settings-enable-notifications" type="checkbox" data-ng-change="$ctrl.toggleNotifications();" data-ng-model="$ctrl.enableNotifications"/>
    </div>
</div>